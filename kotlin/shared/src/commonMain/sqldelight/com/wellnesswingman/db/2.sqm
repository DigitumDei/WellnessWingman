-- Migration from version 2 to version 3
-- Adds WeightRecord table for historical weight tracking

CREATE TABLE WeightRecord (
    weightRecordId INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    externalId TEXT,
    recordedAt INTEGER NOT NULL,
    weightValue REAL NOT NULL,
    weightUnit TEXT NOT NULL,
    source TEXT NOT NULL,
    relatedEntryId INTEGER
);

CREATE INDEX idx_weight_record_recorded_at ON WeightRecord(recordedAt);
